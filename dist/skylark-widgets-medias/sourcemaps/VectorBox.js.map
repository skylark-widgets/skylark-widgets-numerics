{"version":3,"sources":["VectorBox.js"],"names":["define","Widget","numerics","inherit","_construct","parent","createInput","input","document","createElement","type","style","backgroundColor","Editor","theme","boxColor","color","textColor","borderStyle","position","boxSizing","textIndent","borderRadius","outline","MozAppearance","webkitAppearance","appearance","call","this","xText","width","textAlign","verticalAlign","appendChild","createTextNode","_elm","x","left","yText","y","zText","z","wText","w","order","VectorBox","VECTOR3","setType","_updateInterface","setStep","value","String","step","setRange","min","max","getValue","parseFloat","setValue","isVector2","VECTOR2","isVector3","isEuler","isQuaternion","QUATERNION","undefined","setOnChange","onChange","onchange","_updateSize","prototype","sizeX","Math","round","size","sizeY","height","lineHeight","visibility"],"mappings":"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","file":"../VectorBox.js","sourcesContent":["define([\n\t\"skylark-widgets-base/Widget\",\n\t\"./numerics\"\n],function(Widget,numerics){\n\n\t//TODO r20200514 lwf\n\t\n\t\"use strict\";\n\n\t/**\n\t * The vector box is used to represent Vector2, Vector3, Vector4 and Euler values.\n\t *\n\t * @class VectorBox\n\t * @extends {Widget}\n\t */\n\tvar NumberBox = Widget.inherit({\n\n\t\t_construct : function (parent) {\n\t\t\tWidget.call(this, parent, \"div\");\n\n\t\t\t//X Text\n\t\t\tthis.xText = document.createElement(\"div\");\n\t\t\tthis.xText.style.position = \"absolute\";\n\t\t\tthis.xText.style.width = \"15px\";\n\t\t\tthis.xText.style.textAlign = \"center\";\n\t\t\tthis.xText.style.verticalAlign = \"middle\";\n\t\t\tthis.xText.appendChild(document.createTextNode(\"X\"));\n\t\t\tthis._elm.appendChild(this.xText);\n\n\t\t\tfunction createInput()\n\t\t\t{\n\t\t\t\tvar input = document.createElement(\"input\");\n\t\t\t\tinput.type = \"number\";\n\t\t\t\tinput.style.backgroundColor = Editor.theme.boxColor;\n\t\t\t\tinput.style.color = Editor.theme.textColor;\n\t\t\t\tinput.style.borderStyle = \"none\";\n\t\t\t\tinput.style.position = \"absolute\";\n\t\t\t\tinput.style.boxSizing = \"border-box\";\n\t\t\t\tinput.style.textIndent = \"4px\";\n\t\t\t\tinput.style.borderRadius = \"4px\";\n\t\t\t\tinput.style.outline = \"none\";\n\t\t\t\tinput.style.MozAppearance = \"textfield\";\n\t\t\t\tinput.style.webkitAppearance = \"caret\";\n\t\t\t\tinput.style.appearance = \"textfield\";\n\t\t\t\treturn input;\n\t\t\t}\n\n\t\t\t//X\n\t\t\tthis.x = createInput();\n\t\t\tthis.x.style.left = \"15px\";\n\t\t\tthis._elm.appendChild(this.x);\n\n\t\t\t//Y Text\n\t\t\tthis.yText = document.createElement(\"div\");\n\t\t\tthis.yText.style.position = \"absolute\";\n\t\t\tthis.yText.style.width = \"15px\";\n\t\t\tthis.yText.style.textAlign = \"center\";\n\t\t\tthis.yText.style.verticalAlign = \"middle\";\n\t\t\tthis.yText.appendChild(document.createTextNode(\"Y\"));\n\t\t\tthis._elm.appendChild(this.yText);\n\n\t\t\t//Y\n\t\t\tthis.y = createInput();\n\t\t\tthis._elm.appendChild(this.y);\n\n\t\t\t//Z Text\n\t\t\tthis.zText = document.createElement(\"div\");\n\t\t\tthis.zText.style.position = \"absolute\";\n\t\t\tthis.zText.style.width = \"15px\";\n\t\t\tthis.zText.style.textAlign = \"center\";\n\t\t\tthis.zText.style.verticalAlign = \"middle\";\n\t\t\tthis.zText.appendChild(document.createTextNode(\"Z\"));\n\t\t\tthis._elm.appendChild(this.zText);\n\n\t\t\t//Z\n\t\t\tthis.z = createInput();\n\t\t\tthis._elm.appendChild(this.z);\n\n\t\t\t//W Text\n\t\t\tthis.wText = document.createElement(\"div\");\n\t\t\tthis.wText.style.position = \"absolute\";\n\t\t\tthis.wText.style.width = \"15px\";\n\t\t\tthis.wText.style.textAlign = \"center\";\n\t\t\tthis.wText.style.verticalAlign = \"middle\";\n\t\t\tthis.wText.appendChild(document.createTextNode(\"W\"));\n\t\t\tthis._elm.appendChild(this.wText);\n\n\t\t\t//W\n\t\t\tthis.w = createInput();\n\t\t\tthis._elm.appendChild(this.w);\n\n\t\t\t//Order\n\t\t\tthis.order = \"XYZ\";\n\t\t\tthis.type = VectorBox.VECTOR3;\n\t\t},\n\n\n\t\t/**\n\t\t * Set the type of box, (type of data to use).\n\t\t *  - VectorBox.VECTOR2\n\t\t *  - VectorBox.VECTOR3\n\t\t *  - VectorBox.QUATERNION\n\t\t *\n\t\t * @method setType\n\t\t * @param {Number} type\n\t\t */\n\t\tsetType : function(type){\n\t\t\tif(this.type !== type){\n\t\t\t\tthis.type = type;\n\t\t\t\tthis._updateInterface();\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Set the values step.\n\t\t *\n\t\t * @method setStep\n\t\t * @param {Number} value\n\t\t */\n\t\tsetStep : function(value){\n\t\t\tvar value = String(value);\n\t\t\tthis.x.step = value;\n\t\t\tthis.y.step = value;\n\t\t\tthis.z.step = value;\n\t\t\tthis.w.step = value;\n\t\t},\n\n\t\t/**\n\t\t * Set the values range\n\t\t *\n\t\t * @method setRange\n\t\t * @param {Number} min\n\t\t * @param {Number} max\n\t\t */\n\t\tsetRange : function(min, max){\n\t\t \tvar min = String(min);\n\t\t \tvar max = String(max);\n\t\t\tthis.x.min = min;\n\t\t\tthis.x.max = max;\n\t\t\tthis.y.min = min;\n\t\t\tthis.y.max = max;\n\t\t\tthis.z.min = min;\n\t\t\tthis.z.max = max;\n\t\t\tthis.w.min = min;\n\t\t\tthis.w.max = max;\t\n\t\t},\n\n\t\t/**\n\t\t * Get a value from the box.\n\t\t *\n\t\t * @method getValue\n\t\t * @return {Object} Value stored.\n\t\t */\n\t\tgetValue : function() {\n\t\t\treturn {x: parseFloat(this.x.value), y: parseFloat(this.y.value), z: parseFloat(this.z.value), w: parseFloat(this.w.value), order: this.order};\n\t\t},\n\n\t\t/**\n\t\t * Set value to the vector box.\n\t\t *\n\t\t * @method setValue\n\t\t * @param {Number} x\n\t\t * @param {Number} y\n\t\t * @param {Number} z\n\t\t * @param {Number} w\n\t\t * @param {Object} value Value\n\t\t */\n\t\tsetValue : function(x, y, z, w) {\n\t\t\tif(x.isVector2) {\n\t\t\t\tthis.x.value = x.x;\n\t\t\t\tthis.y.value = x.y;\n\t\t\t\tthis.setType(VectorBox.VECTOR2);\n\t\t\t} else if(x.isVector3) {\n\t\t\t\tthis.x.value = x.x;\n\t\t\t\tthis.y.value = x.y;\n\t\t\t\tthis.z.value = x.z;\n\t\t\t\tthis.setType(VectorBox.VECTOR3);\n\t\t\t} else if(x.isEuler) {\n\t\t\t\tthis.x.value = x.x;\n\t\t\t\tthis.y.value = x.y;\n\t\t\t\tthis.z.value = x.z;\n\t\t\t\tthis.order = x.order;\n\t\t\t\tthis.setType(VectorBox.VECTOR3);\n\t\t\t} else if(x.isQuaternion) {\n\t\t\t\tthis.x.value = x.x;\n\t\t\t\tthis.y.value = x.y;\n\t\t\t\tthis.z.value = x.z;\n\t\t\t\tthis.w.value = x.w;\n\t\t\t\tthis.setType(VectorBox.QUATERNION);\n\t\t\t} else \t{\n\t\t\t\tthis.x.value = x;\n\t\t\t\tthis.y.value = y;\n\t\t\t\tthis.z.value = (z !== undefined) ? z : 0;\n\t\t\t\tthis.w.value = (w !== undefined) ? w : 0;\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Set onchange callback, called after changes.\n\t\t *\n\t\t * @method setOnChange\n\t\t * @param {Function} onChange\n\t\t */\n\t\tsetOnChange : function(onChange) {\n\t\t\tthis.x.onchange = onChange;\n\t\t\tthis.y.onchange = onChange;\n\t\t\tthis.z.onchange = onChange;\n\t\t\tthis.w.onchange = onChange;\n\t\t},\n\n\t\t_updateSize : function() {\n\t\t\tWidget.prototype._updateSize.call(this);\n\t\t\t\n\t\t\tvar sizeX = Math.round((this.size.x - this.type * 15) / this.type);\n\t\t\tvar sizeY = this.size.y + \"px\";\n\n\t\t\tthis.xText.style.height = sizeY;\n\t\t\tthis.xText.style.lineHeight = sizeY;\n\t\t\tthis.x.style.width = sizeX + \"px\";\n\n\t\t\tthis.yText.style.left = (15 + sizeX) + \"px\";\n\t\t\tthis.yText.style.height = sizeY;\n\t\t\tthis.yText.style.lineHeight = sizeY;\n\t\t\tthis.y.style.left = (30 + sizeX) + \"px\";\n\t\t\tthis.y.style.width = sizeX + \"px\";\n\n\t\t\tif(this.type >= VectorBox.VECTOR3){\n\t\t\t\tthis.zText.style.left = (30 + (2 * sizeX)) + \"px\";\n\t\t\t\tthis.zText.style.height = sizeY;\n\t\t\t\tthis.zText.style.lineHeight = sizeY;\n\t\t\t\tthis.z.style.left = (45 + (2 * sizeX)) + \"px\";\n\t\t\t\tthis.z.style.width = sizeX + \"px\";\n\n\t\t\t\tif(this.type === VectorBox.QUATERNION){\n\t\t\t\t\tthis.wText.style.left = (45 + (3 * sizeX)) + \"px\";\n\t\t\t\t\tthis.wText.style.height = sizeY;\n\t\t\t\t\tthis.wText.style.lineHeight = sizeY;\n\t\t\t\t\tthis.w.style.left = (60 + (3 * sizeX)) + \"px\";\n\t\t\t\t\tthis.w.style.width = sizeX + \"px\";\n\n\t\t\t\t\tthis.zText.style.visibility = \"visible\";\n\t\t\t\t\tthis.z.style.visibility = \"visible\";\n\t\t\t\t\tthis.w.style.visibility = \"visible\";\n\t\t\t\t\tthis.wText.style.visibility = \"visible\";\n\t\t\t\t}else{\n\t\t\t\t\tthis.zText.style.visibility = \"visible\";\n\t\t\t\t\tthis.z.style.visibility = \"visible\";\n\t\t\t\t\tthis.w.style.visibility = \"hidden\";\n\t\t\t\t\tthis.wText.style.visibility = \"hidden\";\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.z.style.visibility = \"hidden\";\n\t\t\t\tthis.zText.style.visibility = \"hidden\";\n\t\t\t\tthis.w.style.visibility = \"hidden\";\n\t\t\t\tthis.wText.style.visibility = \"hidden\";\n\t\t\t}\n\t\t}\n\t});\n\n\tVectorBox.VECTOR2 = 2;\n\tVectorBox.VECTOR3 = 3;\n\tVectorBox.QUATERNION = 4;\n\n\treturn numerics.VectorBox = VectorBox;\n});"]}