{"version":3,"sources":["VectorBox.js"],"names":["define","Widget","numerics","VectorBox","inherit","_construct","parent","createInput","input","document","createElement","type","style","backgroundColor","Editor","theme","boxColor","color","textColor","borderStyle","position","boxSizing","textIndent","borderRadius","outline","MozAppearance","webkitAppearance","appearance","prototype","call","this","xText","width","textAlign","verticalAlign","appendChild","createTextNode","_elm","x","left","yText","y","zText","z","wText","w","order","VECTOR3","setType","updateInterface","setStep","value","String","step","setRange","min","max","getValue","parseFloat","setValue","isVector2","VECTOR2","isVector3","isEuler","isQuaternion","QUATERNION","undefined","setOnChange","onChange","onchange","_updateSize","sizeX","Math","round","size","sizeY","height","lineHeight","visibility"],"mappings":"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","file":"../VectorBox.js","sourcesContent":["define([\r\n\t\"skylark-widgets-base/Widget\",\r\n\t\"./numerics\"\r\n],function(Widget,numerics){\r\n\r\n\t//TODO r20200514 lwf\r\n\t\r\n\t\"use strict\";\r\n\r\n\t/**\r\n\t * The vector box is used to represent Vector2, Vector3, Vector4 and Euler values.\r\n\t *\r\n\t * @class VectorBox\r\n\t * @extends {Widget}\r\n\t */\r\n\tvar VectorBox = Widget.inherit({\r\n\r\n\t\t_construct : function (parent) {\r\n\t\t\tWidget.prototype._construct.call(this, parent, \"div\");\r\n\r\n\t\t\t//X Text\r\n\t\t\tthis.xText = document.createElement(\"div\");\r\n\t\t\tthis.xText.style.position = \"absolute\";\r\n\t\t\tthis.xText.style.width = \"15px\";\r\n\t\t\tthis.xText.style.textAlign = \"center\";\r\n\t\t\tthis.xText.style.verticalAlign = \"middle\";\r\n\t\t\tthis.xText.appendChild(document.createTextNode(\"X\"));\r\n\t\t\tthis._elm.appendChild(this.xText);\r\n\r\n\t\t\tfunction createInput()\r\n\t\t\t{\r\n\t\t\t\tvar input = document.createElement(\"input\");\r\n\t\t\t\tinput.type = \"number\";\r\n\t\t\t\tinput.style.backgroundColor = Editor.theme.boxColor;\r\n\t\t\t\tinput.style.color = Editor.theme.textColor;\r\n\t\t\t\tinput.style.borderStyle = \"none\";\r\n\t\t\t\tinput.style.position = \"absolute\";\r\n\t\t\t\tinput.style.boxSizing = \"border-box\";\r\n\t\t\t\tinput.style.textIndent = \"4px\";\r\n\t\t\t\tinput.style.borderRadius = \"4px\";\r\n\t\t\t\tinput.style.outline = \"none\";\r\n\t\t\t\tinput.style.MozAppearance = \"textfield\";\r\n\t\t\t\tinput.style.webkitAppearance = \"caret\";\r\n\t\t\t\tinput.style.appearance = \"textfield\";\r\n\t\t\t\treturn input;\r\n\t\t\t}\r\n\r\n\t\t\t//X\r\n\t\t\tthis.x = createInput();\r\n\t\t\tthis.x.style.left = \"15px\";\r\n\t\t\tthis._elm.appendChild(this.x);\r\n\r\n\t\t\t//Y Text\r\n\t\t\tthis.yText = document.createElement(\"div\");\r\n\t\t\tthis.yText.style.position = \"absolute\";\r\n\t\t\tthis.yText.style.width = \"15px\";\r\n\t\t\tthis.yText.style.textAlign = \"center\";\r\n\t\t\tthis.yText.style.verticalAlign = \"middle\";\r\n\t\t\tthis.yText.appendChild(document.createTextNode(\"Y\"));\r\n\t\t\tthis._elm.appendChild(this.yText);\r\n\r\n\t\t\t//Y\r\n\t\t\tthis.y = createInput();\r\n\t\t\tthis._elm.appendChild(this.y);\r\n\r\n\t\t\t//Z Text\r\n\t\t\tthis.zText = document.createElement(\"div\");\r\n\t\t\tthis.zText.style.position = \"absolute\";\r\n\t\t\tthis.zText.style.width = \"15px\";\r\n\t\t\tthis.zText.style.textAlign = \"center\";\r\n\t\t\tthis.zText.style.verticalAlign = \"middle\";\r\n\t\t\tthis.zText.appendChild(document.createTextNode(\"Z\"));\r\n\t\t\tthis._elm.appendChild(this.zText);\r\n\r\n\t\t\t//Z\r\n\t\t\tthis.z = createInput();\r\n\t\t\tthis._elm.appendChild(this.z);\r\n\r\n\t\t\t//W Text\r\n\t\t\tthis.wText = document.createElement(\"div\");\r\n\t\t\tthis.wText.style.position = \"absolute\";\r\n\t\t\tthis.wText.style.width = \"15px\";\r\n\t\t\tthis.wText.style.textAlign = \"center\";\r\n\t\t\tthis.wText.style.verticalAlign = \"middle\";\r\n\t\t\tthis.wText.appendChild(document.createTextNode(\"W\"));\r\n\t\t\tthis._elm.appendChild(this.wText);\r\n\r\n\t\t\t//W\r\n\t\t\tthis.w = createInput();\r\n\t\t\tthis._elm.appendChild(this.w);\r\n\r\n\t\t\t//Order\r\n\t\t\tthis.order = \"XYZ\";\r\n\t\t\tthis.type = VectorBox.VECTOR3;\r\n\t\t},\r\n\r\n\r\n\t\t/**\r\n\t\t * Set the type of box, (type of data to use).\r\n\t\t *  - VectorBox.VECTOR2\r\n\t\t *  - VectorBox.VECTOR3\r\n\t\t *  - VectorBox.QUATERNION\r\n\t\t *\r\n\t\t * @method setType\r\n\t\t * @param {Number} type\r\n\t\t */\r\n\t\tsetType : function(type){\r\n\t\t\tif(this.type !== type){\r\n\t\t\t\tthis.type = type;\r\n\t\t\t\tthis.updateInterface();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Set the values step.\r\n\t\t *\r\n\t\t * @method setStep\r\n\t\t * @param {Number} value\r\n\t\t */\r\n\t\tsetStep : function(value){\r\n\t\t\tvar value = String(value);\r\n\t\t\tthis.x.step = value;\r\n\t\t\tthis.y.step = value;\r\n\t\t\tthis.z.step = value;\r\n\t\t\tthis.w.step = value;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Set the values range\r\n\t\t *\r\n\t\t * @method setRange\r\n\t\t * @param {Number} min\r\n\t\t * @param {Number} max\r\n\t\t */\r\n\t\tsetRange : function(min, max){\r\n\t\t \tvar min = String(min);\r\n\t\t \tvar max = String(max);\r\n\t\t\tthis.x.min = min;\r\n\t\t\tthis.x.max = max;\r\n\t\t\tthis.y.min = min;\r\n\t\t\tthis.y.max = max;\r\n\t\t\tthis.z.min = min;\r\n\t\t\tthis.z.max = max;\r\n\t\t\tthis.w.min = min;\r\n\t\t\tthis.w.max = max;\t\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Get a value from the box.\r\n\t\t *\r\n\t\t * @method getValue\r\n\t\t * @return {Object} Value stored.\r\n\t\t */\r\n\t\tgetValue : function() {\r\n\t\t\treturn {\r\n\t\t\t\tx: parseFloat(this.x.value), \r\n\t\t\t\ty: parseFloat(this.y.value), \r\n\t\t\t\tz: parseFloat(this.z.value), \r\n\t\t\t\tw: parseFloat(this.w.value), \r\n\t\t\t\torder: this.order\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Set value to the vector box.\r\n\t\t *\r\n\t\t * @method setValue\r\n\t\t * @param {Number} x\r\n\t\t * @param {Number} y\r\n\t\t * @param {Number} z\r\n\t\t * @param {Number} w\r\n\t\t * @param {Object} value Value\r\n\t\t */\r\n\t\tsetValue : function(x, y, z, w) {\r\n\t\t\tif(x.isVector2) {\r\n\t\t\t\tthis.x.value = x.x;\r\n\t\t\t\tthis.y.value = x.y;\r\n\t\t\t\tthis.setType(VectorBox.VECTOR2);\r\n\t\t\t} else if(x.isVector3) {\r\n\t\t\t\tthis.x.value = x.x;\r\n\t\t\t\tthis.y.value = x.y;\r\n\t\t\t\tthis.z.value = x.z;\r\n\t\t\t\tthis.setType(VectorBox.VECTOR3);\r\n\t\t\t} else if(x.isEuler) {\r\n\t\t\t\tthis.x.value = x.x;\r\n\t\t\t\tthis.y.value = x.y;\r\n\t\t\t\tthis.z.value = x.z;\r\n\t\t\t\tthis.order = x.order;\r\n\t\t\t\tthis.setType(VectorBox.VECTOR3);\r\n\t\t\t} else if(x.isQuaternion) {\r\n\t\t\t\tthis.x.value = x.x;\r\n\t\t\t\tthis.y.value = x.y;\r\n\t\t\t\tthis.z.value = x.z;\r\n\t\t\t\tthis.w.value = x.w;\r\n\t\t\t\tthis.setType(VectorBox.QUATERNION);\r\n\t\t\t} else \t{\r\n\t\t\t\tthis.x.value = x;\r\n\t\t\t\tthis.y.value = y;\r\n\t\t\t\tthis.z.value = (z !== undefined) ? z : 0;\r\n\t\t\t\tthis.w.value = (w !== undefined) ? w : 0;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Set onchange callback, called after changes.\r\n\t\t *\r\n\t\t * @method setOnChange\r\n\t\t * @param {Function} onChange\r\n\t\t */\r\n\t\tsetOnChange : function(onChange) {\r\n\t\t\tthis.x.onchange = onChange;\r\n\t\t\tthis.y.onchange = onChange;\r\n\t\t\tthis.z.onchange = onChange;\r\n\t\t\tthis.w.onchange = onChange;\r\n\t\t},\r\n\r\n\t\t_updateSize : function() {\r\n\t\t\tWidget.prototype._updateSize.call(this);\r\n\t\t\t\r\n\t\t\tvar sizeX = Math.round((this.size.x - this.type * 15) / this.type);\r\n\t\t\tvar sizeY = this.size.y + \"px\";\r\n\r\n\t\t\tthis.xText.style.height = sizeY;\r\n\t\t\tthis.xText.style.lineHeight = sizeY;\r\n\t\t\tthis.x.style.width = sizeX + \"px\";\r\n\r\n\t\t\tthis.yText.style.left = (15 + sizeX) + \"px\";\r\n\t\t\tthis.yText.style.height = sizeY;\r\n\t\t\tthis.yText.style.lineHeight = sizeY;\r\n\t\t\tthis.y.style.left = (30 + sizeX) + \"px\";\r\n\t\t\tthis.y.style.width = sizeX + \"px\";\r\n\r\n\t\t\tif(this.type >= VectorBox.VECTOR3){\r\n\t\t\t\tthis.zText.style.left = (30 + (2 * sizeX)) + \"px\";\r\n\t\t\t\tthis.zText.style.height = sizeY;\r\n\t\t\t\tthis.zText.style.lineHeight = sizeY;\r\n\t\t\t\tthis.z.style.left = (45 + (2 * sizeX)) + \"px\";\r\n\t\t\t\tthis.z.style.width = sizeX + \"px\";\r\n\r\n\t\t\t\tif(this.type === VectorBox.QUATERNION){\r\n\t\t\t\t\tthis.wText.style.left = (45 + (3 * sizeX)) + \"px\";\r\n\t\t\t\t\tthis.wText.style.height = sizeY;\r\n\t\t\t\t\tthis.wText.style.lineHeight = sizeY;\r\n\t\t\t\t\tthis.w.style.left = (60 + (3 * sizeX)) + \"px\";\r\n\t\t\t\t\tthis.w.style.width = sizeX + \"px\";\r\n\r\n\t\t\t\t\tthis.zText.style.visibility = \"visible\";\r\n\t\t\t\t\tthis.z.style.visibility = \"visible\";\r\n\t\t\t\t\tthis.w.style.visibility = \"visible\";\r\n\t\t\t\t\tthis.wText.style.visibility = \"visible\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.zText.style.visibility = \"visible\";\r\n\t\t\t\t\tthis.z.style.visibility = \"visible\";\r\n\t\t\t\t\tthis.w.style.visibility = \"hidden\";\r\n\t\t\t\t\tthis.wText.style.visibility = \"hidden\";\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis.z.style.visibility = \"hidden\";\r\n\t\t\t\tthis.zText.style.visibility = \"hidden\";\r\n\t\t\t\tthis.w.style.visibility = \"hidden\";\r\n\t\t\t\tthis.wText.style.visibility = \"hidden\";\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tVectorBox.VECTOR2 = 2;\r\n\tVectorBox.VECTOR3 = 3;\r\n\tVectorBox.QUATERNION = 4;\r\n\r\n\treturn numerics.VectorBox = VectorBox;\r\n});"]}